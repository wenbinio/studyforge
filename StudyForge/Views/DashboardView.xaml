<UserControl x:Class="StudyForge.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="900">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            <TextBlock Text="Dashboard" FontSize="32" FontWeight="Bold" Margin="0,0,0,20"/>
            
            <!-- Statistics Cards -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Cards Due Today -->
                <Border Grid.Column="0" Background="#3498DB" CornerRadius="10" Padding="20" Margin="5">
                    <StackPanel>
                        <TextBlock Text="Cards Due Today" FontSize="14" Foreground="White" Opacity="0.9"/>
                        <TextBlock Text="{Binding Statistics.CardsDueToday}" FontSize="36" FontWeight="Bold" Foreground="White" Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- Total Cards Reviewed -->
                <Border Grid.Column="1" Background="#2ECC71" CornerRadius="10" Padding="20" Margin="5">
                    <StackPanel>
                        <TextBlock Text="Total Reviewed" FontSize="14" Foreground="White" Opacity="0.9"/>
                        <TextBlock Text="{Binding Statistics.TotalCardsReviewed}" FontSize="36" FontWeight="Bold" Foreground="White" Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- Pomodoros Completed -->
                <Border Grid.Column="2" Background="#E74C3C" CornerRadius="10" Padding="20" Margin="5">
                    <StackPanel>
                        <TextBlock Text="Pomodoros" FontSize="14" Foreground="White" Opacity="0.9"/>
                        <TextBlock Text="{Binding Statistics.TotalPomodorosCompleted}" FontSize="36" FontWeight="Bold" Foreground="White" Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- Study Streak -->
                <Border Grid.Column="3" Background="#F39C12" CornerRadius="10" Padding="20" Margin="5">
                    <StackPanel>
                        <TextBlock Text="Current Streak" FontSize="14" Foreground="White" Opacity="0.9"/>
                        <TextBlock FontSize="36" FontWeight="Bold" Foreground="White" Margin="0,10,0,0">
                            <Run Text="{Binding Statistics.CurrentStreak}"/>
                            <Run Text=" days" FontSize="18"/>
                        </TextBlock>
                    </StackPanel>
                </Border>
            </Grid>
            
            <!-- Recent Activity -->
            <Border Background="White" CornerRadius="10" Padding="20" Margin="0,20,0,0">
                <StackPanel>
                    <TextBlock Text="Quick Actions" FontSize="20" FontWeight="Bold" Margin="0,0,0,15"/>
                    
                    <WrapPanel>
                        <Button Content="ðŸ“š Start Review Session" Padding="15,10" Margin="5" Background="#3498DB" Foreground="White" BorderThickness="0" FontSize="14" Cursor="Hand"/>
                        <Button Content="âž• Create Flashcard" Padding="15,10" Margin="5" Background="#2ECC71" Foreground="White" BorderThickness="0" FontSize="14" Cursor="Hand"/>
                        <Button Content="ðŸ“ Add Note" Padding="15,10" Margin="5" Background="#9B59B6" Foreground="White" BorderThickness="0" FontSize="14" Cursor="Hand"/>
                        <Button Content="â±ï¸ Start Pomodoro" Padding="15,10" Margin="5" Background="#E74C3C" Foreground="White" BorderThickness="0" FontSize="14" Cursor="Hand"/>
                    </WrapPanel>
                </StackPanel>
            </Border>
            
            <!-- Study Progress -->
            <Border Background="White" CornerRadius="10" Padding="20" Margin="0,20,0,0">
                <StackPanel>
                    <TextBlock Text="Study Progress" FontSize="20" FontWeight="Bold" Margin="0,0,0,15"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="Total Study Time" FontSize="14" Margin="0,5"/>
                            <TextBlock FontSize="18" FontWeight="Bold">
                                <Run Text="{Binding Statistics.TotalStudyMinutes}"/>
                                <Run Text=" minutes"/>
                            </TextBlock>
                            
                            <TextBlock Text="Longest Streak" FontSize="14" Margin="0,15,0,5"/>
                            <TextBlock FontSize="18" FontWeight="Bold">
                                <Run Text="{Binding Statistics.LongestStreak}"/>
                                <Run Text=" days"/>
                            </TextBlock>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Total Flashcards" FontSize="14" Margin="0,5"/>
                            <TextBlock Text="{Binding Flashcards.Count}" FontSize="18" FontWeight="Bold"/>
                            
                            <TextBlock Text="Total Notes" FontSize="14" Margin="0,15,0,5"/>
                            <TextBlock Text="{Binding Notes.Count}" FontSize="18" FontWeight="Bold"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>
            
            <!-- Upcoming Reviews -->
            <Border Background="White" CornerRadius="10" Padding="20" Margin="0,20,0,0">
                <StackPanel>
                    <TextBlock Text="Cards Due for Review" FontSize="20" FontWeight="Bold" Margin="0,0,0,15"/>
                    
                    <ListBox ItemsSource="{Binding DueFlashcards}" MaxHeight="200" BorderThickness="0">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#F8F9FA" Padding="10" Margin="0,5" CornerRadius="5">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Question}" FontWeight="Bold" TextWrapping="Wrap"/>
                                        <TextBlock Text="{Binding Category}" FontSize="12" Foreground="Gray" Margin="0,5,0,0"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    
                    <TextBlock Text="No cards due for review" 
                              Foreground="Gray" 
                              HorizontalAlignment="Center" 
                              Margin="20"
                              Visibility="{Binding DueFlashcards.Count, Converter={StaticResource CountToVisibilityConverter}}"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
